<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Execute Omada Login Request</title>
</head>
<body>
    <h1>Execute Omada Login Request</h1>
    <button id="executeButton">Execute Login</button>
    <div id="debug"></div>

    <script>
        async function executeLogin() {
            const debug = document.getElementById('debug');
            debug.innerHTML = 'Starting login...<br>';

            const variables = {
                OMADA_URL: 'https://192.168.0.50:443',
                USERNAME: 'obordoreynel@gmail.com',
                PASSWORD: 'Gofuckyourself123***',
                CLIENT_ID: 'e9268e9afe6e49fb83a2140a14834a66',
                OMADA_ID: '2b620cc1a125dfb76ddbad7be8299745'
            };

            const loginUrl = `${variables.OMADA_URL}/openapi/authorize/login?client_id=${variables.CLIENT_ID}&omadac_id=${variables.OMADA_ID}`;
            const loginBody = {
                username: variables.USERNAME,
                password: variables.PASSWORD
            };

            try {
                const loginResponse = await fetch(loginUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(loginBody)
                });
                
                if (!loginResponse.ok) throw new Error('Failed to login');
                const loginData = await loginResponse.json();

                debug.innerHTML += 'Login successful.<br>';
                debug.innerHTML += `<pre>${JSON.stringify(loginData, null, 2)}</pre>`;

            } catch (error) {
                debug.innerHTML += `Error: ${error.message}<br>`;
            }
        }

        document.getElementById('executeButton').addEventListener('click', executeLogin);
    </script>
</body>
</html>
